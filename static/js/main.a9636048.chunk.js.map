{"version":3,"sources":["hooks/useLocalStorage.ts","components/FirstTime.tsx","alg.ts","components/Cryptor.tsx","App.tsx","index.tsx","App.module.scss","components/FirstTime.module.scss","components/Cryptor.module.scss"],"names":["useLocalStorage","key","get","window","localStorage","getItem","n","setItem","removeItem","FirstTime","useState","error","setError","pass","setPass","setPassLs","doShowError","useMemo","length","handleSubmit","console","log","setTimeout","location","reload","className","styles","firstTime","firstTimeValidationError","onSubmit","placeholder","maxLength","onChange","e","target","value","type","alg","passphrase","code","options","str","res","sha256","addExtra","btoa","String","fromCharCode","apply","replace","split","undefined","maxLen","substring","Cryptor","React","service","setService","setMaxLen","result","setResult","doAddExtra","setDoAddExtra","cryptor","onClick","form","preventDefault","createdPass","createPass","parseInt","checked","onFocus","select","App","hasPass","mainPageWrapper","inner","ReactDOM","render","document","getElementById","module","exports"],"mappings":"wLAAe,SAASA,EAAgBC,GACtC,IAAMC,EAAM,kBAAMC,OAAOC,aAAaC,QAAQJ,IAI9C,MAAO,CAACC,EAHI,SAACI,GAAD,OAAgBA,EAAIH,OAAOC,aAAaG,QAAQN,EAAKK,GAAKH,OAAOC,aAAaI,WAAWP,IACtF,kBAAe,MAATC,M,2BCCR,SAASO,IAAa,IAAD,EACRC,mBAAS,IADD,mBAC3BC,EAD2B,KACpBC,EADoB,OAEVF,mBAAS,IAFC,mBAE3BG,EAF2B,KAErBC,EAFqB,OAIZd,EAAgB,YAA7Be,EAJyB,oBAM5BC,EAAcC,mBAAQ,WAC1B,OAAuB,GAAhBN,EAAMO,SACZ,CAACP,IASEQ,EAAe,WACnB,GAAGN,EAAKK,OAAS,EAGf,OAFAE,QAAQC,IAAIR,EAAKK,QARnBN,EASY,0DARZU,YAAW,WACTV,EAAS,MACR,KASHG,EAAUF,GACVV,OAAOoB,SAASC,UAGlB,OACE,sBAAKC,UAAWC,IAAOC,UAAvB,UACE,kDACA,8GAEE,uBAFF,+GAKCX,EAAc,qBAAKS,UAAWC,IAAOE,yBAAvB,SAAkDjB,IAAe,6BAChF,uBAAMkB,SAAU,kBAAMV,KAAtB,UACE,uBAAOW,YAAa,wBAAyBC,UAAW,GAAIC,SAAU,SAAAC,GAAC,OAAInB,EAAQmB,EAAEC,OAAOC,UAC5F,wBAAQC,KAAK,SAAb,uB,oCC/BO,SAASC,EAAIC,EAAoBC,EAAcC,GAC5D,IAV0BC,EAUtBC,EAAMC,IAAO,GAAD,OAAIL,GAAJ,OAAiBC,IAUjC,OARA,OAAGC,QAAH,IAAGA,OAAH,EAAGA,EAASI,YAZcH,EAaNC,EAAlBA,EAZKG,KAAKC,OAAOC,aAAaC,MAAM,KAEpCP,EAAIQ,QAAQ,SAAU,IAAIA,QAAQ,qBAAsB,SAASA,QAAQ,MAAO,IAAIC,MAAM,aAatEC,IAAZ,OAAPX,QAAO,IAAPA,OAAA,EAAAA,EAASY,UACVV,EAAMA,EAAIW,UAAU,EAAGb,EAAQY,SAG1BV,ECjBM,SAASY,IAAW,IAAD,EACRtD,EAAgB,YADR,mBACzBa,EADyB,KACnBC,EADmB,OAEFyC,IAAM7C,SAAS,IAFb,mBAEzB8C,EAFyB,KAEhBC,EAFgB,OAGJF,IAAM7C,SAAS,GAHX,mBAGzB0C,EAHyB,KAGjBM,EAHiB,OAIJH,IAAM7C,cAA6ByC,GAJ/B,mBAIzBQ,EAJyB,KAIjBC,EAJiB,OAKIL,IAAM7C,UAAS,GALnB,mBAKzBmD,EALyB,KAKbC,EALa,KAwBhC,OACE,sBAAKrC,UAAWC,IAAOqC,QAAvB,UACE,wBAAQC,QAnBM,WAChBlD,OAAQqC,GACRhD,OAAOoB,SAASC,UAiBd,8BACA,uBAAMC,UAAWC,IAAOuC,KAAMpC,SAAU,SAAAI,GAAC,OAf1B,SAACA,GAClBA,EAAEiC,iBACF,IAAI1B,EAAsB,CACxBI,SAAUiB,GAETT,EAAS,IACVZ,EAAQY,OAASA,GAEnB,IAAMe,EAAc9B,EAAIxB,IAAS2C,EAAShB,GAC1CoB,EAAUO,GAMqCC,CAAWnC,IAAxD,UACE,uBAAOG,KAAK,OAAON,YAAY,0BAA0BK,MAAOqB,EAASxB,SAAU,SAAAC,GAAC,OAAIwB,EAAWxB,EAAEC,OAAOC,UAC5G,uBAAOC,KAAK,SAASN,YAAY,4BAA4BK,MAAOiB,EAAQpB,SAAU,SAAAC,GAAC,OAAIyB,EAAUW,SAASpC,EAAEC,OAAOC,WACvH,uBAAOC,KAAK,WAAWJ,SAAU,SAAAC,GAAC,OAAI6B,EAAc7B,EAAEC,OAAOoC,UAAUA,QAAST,EAAY/B,YAAY,6BACxG,wBAAQM,KAAK,SAAb,oBACA,uBAAOA,KAAK,OAAON,YAAY,sBAAsBK,MAAOwB,EAAQY,QAAS,SAAAtC,GAAC,OAAIA,EAAEC,OAAOsC,kBC/BpF,SAASC,IAAO,IAAD,EACQzE,EAAgB,YADxB,mBACH0E,GADG,gBAG5B,OACE,qBAAKjD,UAAWC,IAAOiD,gBAAvB,SACE,sBAAKlD,UAAWC,IAAOkD,MAAvB,UACE,wCACA,2EACCF,IAAY,cAACpB,EAAD,IAAc,cAAC7C,EAAD,S,MCTnCoE,IAASC,OAAO,cAACL,EAAD,IAASM,SAASC,eAAe,U,kBCJjDC,EAAOC,QAAU,CAAC,gBAAkB,6BAA6B,MAAQ,qB,kBCAzED,EAAOC,QAAU,CAAC,UAAY,6BAA6B,yBAA2B,8C,kBCAtFD,EAAOC,QAAU,CAAC,QAAU,yBAAyB,KAAO,yB","file":"static/js/main.a9636048.chunk.js","sourcesContent":["export default function useLocalStorage(key: string): [() => string | null, (n?: string) => void, () => boolean] {\r\n  const get = () => window.localStorage.getItem(key)\r\n  const set = (n?: string) => n ? window.localStorage.setItem(key, n) : window.localStorage.removeItem(key)\r\n  const exists = () => get() != null\r\n\r\n  return [get, set, exists]\r\n}\r\n","import styles from './FirstTime.module.scss'\r\nimport React, {useMemo, useState} from 'react'\r\nimport useLocalStorage from '../hooks/useLocalStorage'\r\n\r\nexport default function FirstTime() {\r\n  const [error, setError] = useState(\"\")\r\n  const [pass, setPass] = useState(\"\")\r\n\r\n  const [, setPassLs] = useLocalStorage('password')\r\n\r\n  const doShowError = useMemo(() => {\r\n    return error.length != 0\r\n  }, [error])\r\n\r\n  const showError = (e: string) => {\r\n    setError(e)\r\n    setTimeout(() => {\r\n      setError(\"\")\r\n    }, 500)\r\n  }\r\n\r\n  const handleSubmit = () => {\r\n    if(pass.length < 3) {\r\n      console.log(pass.length)\r\n      showError('Your passphrase must be longer than 3 characters!')\r\n      return\r\n    }\r\n    setPassLs(pass)\r\n    window.location.reload()\r\n  }\r\n\r\n  return (\r\n    <div className={styles.firstTime}>\r\n      <h2>First time setup</h2>\r\n      <p>\r\n        Welcome to Passto! Looks like it is the first time you are using our service.\r\n        <br/>\r\n        You need to setup your passphrase first. Keep in mind that we don't save it anywhere except your browser.\r\n      </p>\r\n      {doShowError ? <div className={styles.firstTimeValidationError}>{error}</div> : <></>}\r\n      <form onSubmit={() => handleSubmit()}>\r\n        <input placeholder={'Enter your passphrase'} maxLength={20} onChange={e => setPass(e.target.value)} />\r\n        <button type=\"submit\">Go!</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n","import sha256 from 'sha256'\r\n\r\nexport function hexToBase64(str: string) {\r\n  return btoa(String.fromCharCode.apply(null,\r\n    // @ts-ignore\r\n    str.replace(/\\r|\\n/g, \"\").replace(/([\\da-fA-F]{2}) ?/g, \"0x$1 \").replace(/ +$/, \"\").split(\" \"))\r\n  );\r\n}\r\n\r\nexport type AlgOptions = { maxLen?: number, addExtra?: boolean }\r\n\r\nexport default function alg(passphrase: string, code: string, options?: AlgOptions) {\r\n  let res = sha256(`${passphrase}${code}`)\r\n\r\n  if(options?.addExtra) {\r\n    res = hexToBase64(res)\r\n  }\r\n\r\n  if(options?.maxLen != undefined) {\r\n    res = res.substring(0, options.maxLen)\r\n  }\r\n\r\n  return res\r\n}\r\n","import React, {FormEvent} from 'react'\r\nimport styles from './Cryptor.module.scss'\r\nimport useLocalStorage from '../hooks/useLocalStorage'\r\nimport alg, {AlgOptions} from '../alg'\r\n\r\nexport default function Cryptor() {\r\n  const [pass, setPass] = useLocalStorage('password')\r\n  const [service, setService] = React.useState('')\r\n  const [maxLen, setMaxLen] = React.useState(0)\r\n  const [result, setResult] = React.useState<string | undefined>(undefined)\r\n  const [doAddExtra, setDoAddExtra] = React.useState(true)\r\n\r\n  const resetPass = () => {\r\n    setPass(undefined)\r\n    window.location.reload()\r\n  }\r\n\r\n  const createPass = (e: FormEvent<any>) => {\r\n    e.preventDefault()\r\n    let options: AlgOptions = {\r\n      addExtra: doAddExtra\r\n    }\r\n    if(maxLen > 0) {\r\n      options.maxLen = maxLen\r\n    }\r\n    const createdPass = alg(pass()!, service, options)\r\n    setResult(createdPass)\r\n  }\r\n\r\n  return (\r\n    <div className={styles.cryptor}>\r\n      <button onClick={resetPass}>Reset passphrase</button>\r\n      <form className={styles.form} onSubmit={e => createPass(e)}>\r\n        <input type=\"text\" placeholder=\"Enter your service here\" value={service} onChange={e => setService(e.target.value)} />\r\n        <input type=\"number\" placeholder=\"Max length (0 = no limit)\" value={maxLen} onChange={e => setMaxLen(parseInt(e.target.value))}  />\r\n        <input type=\"checkbox\" onChange={e => setDoAddExtra(e.target.checked)} checked={doAddExtra} placeholder=\"Do add extra characters?\" />\r\n        <button type=\"submit\">Crypt!</button>\r\n        <input type=\"text\" placeholder=\"Result will be here\" value={result} onFocus={e => e.target.select()} />\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport styles from './App.module.scss'\r\nimport useLocalStorage from './hooks/useLocalStorage'\r\nimport FirstTime from './components/FirstTime'\r\nimport Cryptor from './components/Cryptor'\r\n\r\nexport default function App() {\r\n  const [getPass, setPass, hasPass] = useLocalStorage('password')\r\n\r\n  return (\r\n    <div className={styles.mainPageWrapper}>\r\n      <div className={styles.inner}>\r\n        <h1>Passto</h1>\r\n        <p>A simple and consistent password generator</p>\r\n        {hasPass() ? <Cryptor /> : <FirstTime />}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport './index.scss'\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"))\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mainPageWrapper\":\"App_mainPageWrapper__1-yHH\",\"inner\":\"App_inner__kAoqF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"firstTime\":\"FirstTime_firstTime__6vcc1\",\"firstTimeValidationError\":\"FirstTime_firstTimeValidationError__3NZ7b\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cryptor\":\"Cryptor_cryptor__-O25R\",\"form\":\"Cryptor_form__1_rXC\"};"],"sourceRoot":""}